<section class="documentation">
    <div class="container">
        <div class="row">
            <article class="span8">
                <h2 id="introduction">Introduction</h2>
                <p>It's easy to build real-time data-driven visualisations, or add analytics to your existing applications.  We provide a hosted back-end with analytics capabilities, into which you can load your data via a RESTful API, or from Amazon S3.</p>
                <p>The simplest way to start is to load in a dataset from a csv and fork our example Datacube visualisation on <a href="https://github.com/dataseed/dataseed-visualisation">Github</a>, it's written entirely in js and provided as open source under the GPL2 license.</p>

                <h3>Benefits</h3>
                <ul>
                    <li><p>Powerful cloud-hosted OLAP analytics engine</p></li>
                    <li><p>Support for real-time data streams</p></li>
                    <li><p>RESTful JSON API for importing and querying data</p></li>
                    <li><p>Open-source javascript front-end, built with <a href="http://backbonejs.org/">backbone.js</a>, <a href="http://gruntjs.com/">grunt.js</a>, <a href="https://github.com/twitter/bower">bower</a>, <a href="http://twitter.github.com/bootstrap/">bootstrap</a> - all the good stuff</p></li>
                    <li><p>SVG charts build with <a href="http://d3js.org/">d3.js</a></p></li>
                    <li><p>Versatile multi-dimensional data model</p></li>
                    <li><p>Linked-data approach. Compatible with <a href="http://publishing-statistical-data.googlecode.com/svn/trunk/specs/src/main/html/cube.html">Datacube</a> and <a href="http://sdmx.org/">SDMX</a></p></li>
                    <li><p>Statistical operations including mean, min, max, variance, sum of squares and standard deviation</p></li>
                    <li><p>Responsive and ready for desktop / tablet / mobile</p></li>
                </ul>
            </article>

            <!--TOC BEGIN-->
            <article class="span4">
                <ul class="nav nav-list nav-stacked">
                    <li><a href="#intro">Introduction</a></li>
                    <li>
                        <a href="#getting-started">Getting Started</a>
                        <ul class="nav nav-list nav-stacked">
                            <li><a href="#getting-started-glossary">Glossary</a></li>
                            <li><a href="#getting-started-embed">Basic Embedding</a></li>
                            <li><a href="#getting-started-drupal">Drupal</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#js">Javascript Library</a>
                        <ul class="nav nav-list nav-stacked">
                            <li><a href="#js-dependencies">Dependencies</a></li>
                            <li><a href="#js-setup">Setup</a></li>
                            <li><a href="#js-build">Building</a></li>
                            <li><a href="#js-examples">Examples</a></li>
                        </ul>
                    </li>
                    <!--
                    <li>
                        <a href="#drupal">Drupal Module</a>
                        <ul class="nav nav-list nav-stacked">
                            <li><a href="#drupal-embed">Embedding</a></li>
                            <li><a href="#drupal-create">Creating Observations</a></li>
                        </ul>
                    </li>
                    -->
                    <li>
                        <a href="#api">REST API</a>
                        <ul class="nav nav-list nav-stacked">
                            <li>
                                <a href="#api-intro">Introduction</a>
                                <ul class="nav nav-list nav-stacked">
                                    <li><a href="#api-intro-requests">Requests</a></li>
                                    <li><a href="#api-intro-responses">Responses</a></li>
                                    <li><a href="#api-intro-auth">Authentication</a></li>
                                </ul>
                            </li>
                            <li><a href="#api-dataset">Dataset</a></li>
                            <li><a href="#api-vis">Visualisation</a></li>
                            <li><a href="#api-dimensions">Dimensions</a></li>
                            <li><a href="#api-observations">Observations</a></li>
                        </ul>
                    </li>
                    <!--
                    <li><a href="#troubleshooting">Troubleshooting</a></li>
                    -->
                </ul>
            </article>
            <!--TOC END-->
        </div>

        <h2 id="getting-started">Getting Started</h2>

        <h3 id="getting-started-glossary">Glossary</h3>

        <ul>
            <li>Dataset - A set of fields and values (like a table) and visualisations of them. Each column in the table is a field and each row an observation</li>
            <li>Field - A "column" in the Dataset</li>
            <li>Observation - A "row" in the Dataset</li>
            <li>Measure - A type of Field used in a chart as a numeric value, optionally aggregated (e.g. distance driven by a vehicle)</li>
            <li>Dimension - A type of Field used in a chart as a non-numeric dimension (e.g. a vehicle's model or make)</li>
            <li>Visualisation - A set of Elements using the Measures and Dimensions from the Visualisation's Dataset</li>
            <li>Element - A feature of a Visualisation such as a chart or aggregate summary</li>
            <li>Chart - A graphical representation of a Measure and a Dimension (e.g. Number of miles driven by vehicle model)</li>
        </ul>

        <h3 id="getting-started-embed">Basic Embedding</h3>

        <p>The simplest way to embed a visualisation is to use the "Export" button on the visualisation in Dataseed. The export will provide you with a snippet of HTML that you can copy-and-paste into your site.</p>

        <p>For help on more advanced embedding have a look at the <a href="#js">Javascript Library</a>.</p>

        <h3 id="getting-started-drupal">Drupal</h3>

        <p>For easy Drupal integration check out the <a href="https://drupal.org/project/dataseed">Dataseed module</a> on drupal.org</p>

        <h2 id="js">Javascript Library</h2>

        <p>The <a href="https://github.com/dataseed/dataseed-visualisation">Dataseed Javascript Library</a> allows visualisations to be integrated with existing Javascript applications. A working knowledge of Javascript is necessary to use the library, for a simpler method of including visualisations on your site see <a href="#getting-started-embed">Basic Embedding</a>.</p>

        <p>The library consists of models and views for fetching and rendering visualisations built on the <a href="http://backbonejs.org/">Backbone.js</a> framework with <a href="http://requirejs.org/">RequireJS</a> used for module and dependency handling.</p>

        <h3 id="js-dependencies">Dependencies</h3>

        <p>The library uses the <a href="http://nodejs.org/">Node.js</a> platform for building the JS and related tasks. You can install Node.js using the packages on the <a href="http://nodejs.org/download/">download page</a> or through your OS's package manager.</p>

        <h3 id="js-setup">Setup</h3>

        <ol>
            <li>
                First, grab a copy of the library from Github:
                <code class="shell prettyprint">git clone https://github.com/dataseed/dataseed-visualisation.git</code>
            </li>
            <li>
                Enter the repo:
                <code class="shell prettyprint">cd dataseed-visualisation</code>
            </li>
            <li>
                Install dependencies with npm:
                <code class="shell prettyprint">npm install</code>
            </li>
            <li>
                Get third-party libraries using <a href="http://bower.io/">Bower</a>:
                <code class="shell prettyprint">bower install</code>
            </li>
        </ol>

        <p>To test that everything has been setup correctly open the index-src.html file in a browser and you should see the <a href="{{ url_for('page.VisualisationView:visualise', dataset_id='mortality', visualisation_id='1') }}">mortality visualisation</a>.</p>

        <h3 id="js-build">Building</h3>

        <p>The build process is managed by <a href="http://gruntjs.com/">Grunt</a> and includes Javascript aggregation and minification as well as <a href="http://lesscss.org/">LESS</a> compilation. To run the build use:</p>

        <code class="shell prettyprint">grunt build</code>

        <p>To test that the build completed successfully open the index.html file in a browser.</p>

        <h3 id="js-examples">Example</h3>

        <p>The following example demonstrates a simple web application that renders a visualisation when a user clicks a button:</p>

        <pre><code class="html prettyprint">&lt;!doctype html&gt;
&lt;html dir="ltr" lang="en"&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /&gt;
&lt;title&gt;Dataseed Interactive Data Visualization&lt;/title&gt;
&lt;meta name="viewport" content="width=device-width" /&gt;
&lt;!--[if lt IE 9]&gt;
  &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;
&lt;link href="src/less/dataseed.less" rel="stylesheet/less" type="text/css" /&gt;
&lt;script src="src/components/less/dist/less-1.4.0.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button id="start"&gt;Show me the visualisation!&lt;/button&gt;
&lt;div id="vis"&gt;&lt;/div&gt;
&lt;script src="src/components/requirejs/require.js" data-main="src/js/config"&gt;&lt;/script&gt;
&lt;script&gt;
    $(document).ready(function() {
        $('#start').click(function() {
            require(['./dataseed/views/dataset', 'app'], function(DatasetEmbedView) {
                new DatasetEmbedView({
                    'el': $('#vis'),
                    'id': 'mortality',
                    'visualisation_id': '1'
                });
            });
        });
    });
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

        <!--
        <h2 id="drupal">Drupal Module</h2>

        <h3 id="drupal-embed">Embedding</h3>

        <h3 id="drupal-create">Creating Observations</h3>
        -->

        <h2 id="api">REST API</h2>

        <h3 id="api-intro">Introduction</h3>

        <p>The API for Dataseed is implemented as a set of <a href="http://www.json.org/">JSON</a> resources (e.g. a <a href="#api-vis">Visualisation</a>), each with their own URL. The resources may be read or altered using the standard <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods">HTTP verbs</a>. We have tried to follow <a href="http://en.wikipedia.org/wiki/Representational_state_transfer">RESTful</a> principals in the design of the API wherever possible.</p>

        <p>The examples in this documentation use the <a href="http://en.wikipedia.org/wiki/CURL">cURL</a> command line tool to interact with the API. If you have cURL installed (Linux and OS X users should have it by default) you can copy and paste the commands into a terminal to see them in action! For authenticated commands you'll need to replace the example account details with your own (see <a href="#api-intro-auth">Authentication</a>).</p>

        <h4 id="api-intro-requests">Requests</h4>

        <p>Requests to the API must always specify an <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1">Accept header</a> with the <a href="http://tools.ietf.org/html/rfc4627#section-6">JSON MIME type</a> (i.e. "application/json"). So you could fetch a public dataset using:</p>

        <code class="shell prettyprint">curl -H'Accept: application/json' http://getdataseed.com/api/datasets/mortality</code>

        <p>When sending data to the API you must also specify the MIME type of your request using the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17">Content-Type header</a> header. The following example shows how to add an observation to an existing dataset:</p>

        <code class="shell prettyprint">curl -u'dataseed@example.com:password' -H'Accept: application/json' -H'Content-type: application/json' http://getdataseed.com/api/datasets/my-dataset/observations -d'{ "observations": [ { "id": "o1234", "age": "26", "gender": "M" } ] }'</code>

        <h4 id="api-intro-responses">Responses</h4>

        <p>The are two classes of response returned by the API, indicated by the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">HTTP status code</a>:</p>

        <h5>200/300: Success</h5>

        <p>The request succeeded. When creating or updating resources a 303 code will be returned. The URL the resource should be fetched from is specified in the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30">Location header</a>.</p>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Created"
}</code></pre>

        <h5>400: Bad Request</h5>

        <p>The request failed because it was invalid. A general error message will be provided in the returned JSON as well as more specific errors when applicable.</p>

        <pre><code class="json prettyprint">{
    "status": 400,
    "message": "Invalid",
    "errors": {
        "label": "Required",
        "public": "Required"
    }
}</code></pre>

        <h4 id="api-intro-auth">Authentication</h4>

        <p>All requests must be authenticated except when reading Datasets or Visualisations that are public. Currently, the only supported authentication method is <a href="http://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Authentication</a>. The username and password should be the same ones you use to login with (if you haven't already got an account <a href="#">sign-up for one now</a>).</p>

        <p>So, for example, to fetch a private dataset you would do the following:</p>

        <code class="shell prettyprint">curl -u'dataseed@example.com:password' -H'Accept: application/json' http://getdataseed.com/api/datasets/my-dataset</code>

        <h3 id="api-dataset">Dataset</h3>

        <h4>Read</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -H'Accept: application/json' http://getdataseed.com/api/datasets/mortality</code>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "id": "mortality",
    "label": "Mortality",
    "public": true,
    "imports": [],
    "fields": [
        {
            "id": "year",
            "label": "Year",
            "description": null,
            "aggregations": [],
            "charts": [{"type": "bar"}, {"type": "bubble"}, {"type": "table"}]
        },
        {
            "id": "gender",
            "label": "Gender",
            "description": null,
            "aggregations": [],
            "charts": [{"type": "bar"}, {"type": "bubble"}, {"type": "table"}]
        },
        {
            "id": "value",
            "label": "Value",
            "description": null,
            "aggregations": [{"type": "sum"}, {"type": "mean"}, {"type": "min"}, {"type": "max"}],
            "charts": []
        }

    ],
    "visualisations": [
        {
            "id": "1",
            "label": "Mortality in England and Wales",
            "description": "Explore and compare the number of deaths by disease, sex, area and year",
            "provenance": "Mortality statistics are based on details collected when deaths are certified and registered",
            "public": true,
            "elements": [
                {
                    "id": "year",
                    "label": "Year",
                    "measure_label": "Number of deaths",
                    "type": "bar",
                    "aggregation": "sum",
                    "measure": {"id": "value"},
                    "dimensions": [{"field": {"id": "year", "type": "string"}}],
                    "width": 1,
                    "weight": 2,
                    "display": true
                },
                {
                    "id": "gender",
                    "label": "Gender",
                    "measure_label": "Number of deaths",
                    "type": "bar",
                    "aggregation": "sum",
                    "measure": {"id": "value"},
                    "dimensions": [{"field": {"id": "gender", "type": "string"}}],
                    "width": 1,
                    "weight": 5,
                    "display": true
                }
            ],
            "styles": []
        }
    ],
    "modified": "2013-09-06T10:33:39.789859",
    "created": "2013-09-06T10:33:39.789859"
}</code></pre>

        <h4>Create</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XPOST -u'dataseed@example.com:password' -H'Accept: application/json' -H'Content-type: application/json' http://getdataseed.com/api/datasets/</code>

        <pre><code class="json prettyprint">{
    "label": "My Vehicle Dataset",
    "public": false,
    "fields": [
        {
            "id": "vehicle",
            "label": "Vehicle",
            "description": null,
            "aggregations": [],
            "charts": [{"type": "bar"}, {"type": "bubble"}, {"type": "table"}]
        },
        {
            "id": "miles",
            "label": "Miles",
            "description": null,
            "aggregations": [{"type": "sum"}, {"type": "mean"}, {"type": "min"}, {"type": "max"}],
            "charts": []
        }
    ]
}</code></pre>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 303,
    "href": "/api/datasets/252b529188c2bdee4c16570a133a329d"
}</code></pre>

        <h4>Update</h4>

        <p>By making a PUT request to the URL returned in the previous call we can make changes to our new dataset.</p>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XPUT -u'dataseed@example.com:password' -H'Accept: application/json' -H'Content-type: application/json' http://getdataseed.com/api/datasets/252b529188c2bdee4c16570a133a329d</code>

        <pre><code class="json prettyprint">{
    "label": "My Awesome Vehicle Dataset",
    "public": false
}</code></pre>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 303,
    "href": "/api/datasets/252b529188c2bdee4c16570a133a329d"
}</code></pre>

        <h4>Delete</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XDELETE -u'dataseed@example.com:password' -H'Accept: application/json' http://getdataseed.com/api/datasets/252b529188c2bdee4c16570a133a329d</code>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Deleted"
}</code></pre>

        <h3 id="api-vis">Visualisation</h3>

        <p>In the <a href="#js-examples">example above</a> we have shown how to use the
            <a href="https://github.com/dataseed/dataseed-visualisation">Dataseed
                Javascript Library</a>
            to embed a visualisation within an existing Javascript application.
            Starting from that example, the following shows how to define a
            visualisation directly in the context of the consumer application instead of
            fetching it from Dataseed.
        </p>

<pre id="visualisation-model-example"><code class="html prettyprint">&lt;!doctype html&gt;
&lt;html dir="ltr" lang="en"&gt;
&lt;head&gt;
&lt;meta charset="utf-8" /&gt;
&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /&gt;
&lt;title&gt;Dataseed Interactive Data Visualization&lt;/title&gt;
&lt;meta name="viewport" content="width=device-width" /&gt;
&lt;!--[if lt IE 9]&gt;
  &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;
&lt;link href="src/less/dataseed.less" rel="stylesheet/less" type="text/css" /&gt;
&lt;script src="src/components/less/dist/less-1.4.0.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;button id="start"&gt;Show me the visualisation!&lt;/button&gt;
&lt;div id="vis"&gt;&lt;/div&gt;
&lt;script src="src/components/requirejs/require.js" data-main="src/js/config"&gt;&lt;/script&gt;
&lt;script&gt;
require.config({
    "config": {
        "models/datasetSingleton": {
            "DATASET": {
                "id": "mortality",
                "label": "Mortality",
                "public": true,
                "imports": [],
                "fields": [
                    {
                        "id": "year",
                        "label": "Year",
                        "description": null,
                        "aggregations": [],
                        "charts": [{"type": "bar"}, {"type": "bubble"}, {"type": "table"}]
                    },
                    {
                        "id": "gender",
                        "label": "Gender",
                        "description": null,
                        "aggregations": [],
                        "charts": [{"type": "bar"}, {"type": "bubble"}, {"type": "table"}]
                    },
                    {
                        "id": "value",
                        "label": "Value",
                        "description": null,
                        "aggregations": [{"type": "sum"}, {"type": "mean"}, {"type": "min"}, {"type": "max"}],
                        "charts": []
                    }

                ],
                "visualisations": [
                    {
                        "id": "1",
                        "label": "Mortality in England and Wales",
                        "description": "Explore and compare the number of deaths by disease, sex, area and year",
                        "provenance": "Mortality statistics are based on details collected when deaths are certified and registered",
                        "public": true,
                        "elements": [
                            {
                                "id": "year",
                                "label": "Year",
                                "measure_label": "Number of deaths",
                                "type": "bar",
                                "aggregation": "sum",
                                "measure": {"id": "value"},
                                "dimensions": [{"field": {"id": "year", "type": "string"}}],
                                "width": 1,
                                "weight": 2,
                                "display": true
                            },
                            {
                                "id": "gender",
                                "label": "Gender",
                                "measure_label": "Number of deaths",
                                "type": "bar",
                                "aggregation": "sum",
                                "measure": {"id": "value"},
                                "dimensions": [{"field": {"id": "gender", "type": "string"}}],
                                "width": 1,
                                "weight": 5,
                                "display": true
                            }
                        ],
                        "styles": []
                    }
                ],
                "modified": "2013-09-06T10:33:39.789859",
                "created": "2013-09-06T10:33:39.789859"
            } // end "DATASET"
        }
    } // end "config"
});

$(document).ready(function() {
    $('#start').click(function() {
        require(['./dataseed/views/dataset', 'app'], function(DatasetEmbedView) {
            new DatasetEmbedView({
                'el': $('#vis'),
                'id': 'mortality',
                'visualisation_id': '1'
            });
        });
    });
});
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

        <h4>Elements</h4>

        <p>
            This section shows the available visualisation elements and how to
            use them in a visualisation defined in the context of a consumer
            application.</p>

        <p>
            To be concise, we won't show the whole dataset model in the
            following examples:
            we will just provide snippets that can be added to the elements
            attribute list of the <a href="#visualisation-model-example">Dataseed
            visualisation model example</a> above.
        </p>

        <ul>
            <li>
                <h5>Summary</h5>
                <p>Displays a summary text of the current dataset cut.</p>
<pre><code class="html prettyprint">{
    "aggregation":"sum",
    // Each dimension will be related to a component of the summary text.
    // The first component is always the aggregated totals.
    "dimensions":[
        {
            "bucket":null,
            "field":{
                "id":"gender",
                "type":"string"
            },

            // Component value. $ is a placeholder for the current dimension cut value
            // (in this case we have suffixed it with 's' in order to make plurals)
            "text_format":"&lt;strong&gt;$s died&lt;/strong&gt;",

            // Default summary text component value (displayed when a cut is not
            // set on this dimension)
            "text_default":"people died",

            "weight":1
        },
        {
            "bucket":null,
            "field":{
                "id":"year",
                "type":"string"
            },
            "text_default":"between 2002 and 2011",
            "text_format":"in &lt;strong&gt;$&lt;/strong&gt;",
            "weight":4
        }
    ],
    "display":true,
    "id":"summary",
    "label":"Number of deaths",
    "measure":{
        "id":"value"
    },
    "measure_label":"Number of deaths",
    "type":"summary",
    "weight":1,
    "width":4
}
</code></pre>
            </li>
            <li>
                <h5>Filter</h5>

                <p>Filters let the user add a dimension cut on the visualised
                    dataset through links or drop down selects.</p>
                <ul>
                    <li>
                        <h6>Navigation</h6>

                        <p>The navigation element displays all the dimensions'
                            values as links.</p>
<pre><code class="html prettyprint">{
    "aggregation":"sum",
    // The links will be displayed within an accordion. Each dimension will be a header.
    "dimensions":[
        {
            "bucket":null,
            "field":{
                "id":"gender",
                "type":"string"
            },
            "weight":1
        },
        {
            "bucket":null,
            "field":{
                "id":"year",
                "type":"string"
            },
            "weight":4
        }
    ],
    "display":true,
    "id":"filter",
    "label":"Filter",
    "measure":{
        "id":"value"
    },
    "measure_label":"Number of deaths",
    "type":"navigation",
    "weight":1,
    "width":4
}
</code></pre>
                    </li>
                    <li>
                        <h6>Filter Form</h6>

                        <p>The navigation element displays all the dimensions'
                            values as options of a drop down select form
                            element.</p>
<pre><code class="html prettyprint">{
    "aggregation":"sum",
    "dimensions":[
        {
            "bucket":null,
            "field":{
                "id":"gender",
                "type":"string"
            },
            "weight":1
        },
        {
            "bucket":null,
            "field":{
                "id":"year",
                "type":"string"
            },
            "weight":4
        }
    ],
    "display":true,
    "id":"filter",
    "label":"Filter",
    "measure":{
        "id":"value"
    },
    "measure_label":"Number of deaths",
    "type":"filterForm",
    "weight":1,
    "width":4
}
</code></pre>
                    </li>
                </ul>
            </li>
            <li>
                <h5>Chart</h5>

                <p>Dataseed supports the following chart types:</p>
                <ul>
                    <li><em>Bar</em></li>
                    <li><em>Bubble</em> (Available only on D3)</li>
                    <li><em>Line</em></li>
                </ul>

                <p>A generic chart visualisation element can be defined by:</p>
<pre><code class="html prettyprint">{
    "id": "year",
    "label": "Year",
    "measure_label": "Number of deaths",

    // The attribute that defines the chart type to display
    "type": "&lt;CHART_TYPE_HERE&gt;",
    "aggregation": "sum",
    "measure": {"id": "value"},
    "dimensions": [{"field": {"id": "year", "type": "string"}}],
    "width": 1,
    "weight": 2,
    "display": true
}
</code></pre>
                <p>where the <em>type</em> attribute can assume one of the
                    following values:</p>

                <ul>
                    <li><em>bar</em></li>
                    <li><em>bubble</em></li>
                    <li><em>line</em></li>
                </ul>
            </li>
            <li>
                <h5>Table</h5>

                <p>Rather than charting a dimension we might just want to show
                    all its related observations in a sortable table. This is
                    what the Table element is meant to be used for.</p>
<pre><code class="html prettyprint">{
    "id": "year",
    "label": "Year",
    "measure_label": "Number of deaths",
    "type": "table",
    "aggregation": "sum",
    "measure": {"id": "value"},
    "dimensions": [{"field": {"id": "year", "type": "string"}}],
    "width": 1,
    "weight": 2,
    "display": true
}
</code></pre>
            </li>
        </ul>

        <h4>Optional attributes</h4>

        <p>This section shows all the optional Dataset model attributes that can
            be defined in a visualisation model.</p>
        <ul>
            <li>
                <strong>Dataset</strong>
                <ul>
                    <li>
                        <h5 id="default-cut">cut</h5>
                            <p>The <em>cut</em> dataset attribute allows to define a cut on the dataset
                                dimensions that has to be applied by default when the visualisation is
                                rendered.</p>

<pre><code class="html prettyprint">&lt;script&gt;
require.config({
    "config": {
        "models/datasetSingleton": {
            "DATASET": {
                "id": "mortality",
                "label": "Mortality",
                "fields": [
                    {
                        "id": "gender",
                        "label": "Gender",
                        "description": null,
                        "aggregations": [],
                        "charts": [{"type": "bar"}, {"type": "bubble"}, {"type": "table"}]
                    },
                    // Other Dataset fields here ...

                ],
                "cut": {
                    "gender": "F",
                },
                // Other Dataset attributes here ...
            }
        }
    }
});
&lt;/script&gt;
</code></pre>

                    </li>
                </ul>
            </li>
            <li>
                <strong>Dataset Fields</strong>
                <ul>
                    <li>
                        <h5>update_dimension</h5>

                        <p>Related to a dataset's field, this attribute is set to
                            <em>true</em> if the values for the dimensions related to
                            the field need to be fetched every time a cut is applied to
                            the dataset. Otherwise dimension's values are fetched only
                            once, i.e. when DatasetEmbedView() is instantiated.</p>

                        <p><em>Default value</em>: False</p>

<pre><code class="html prettyprint">&lt;script&gt;
require.config({
    "config": {
        "models/datasetSingleton": {
            "DATASET": {
                "id": "mortality",
                "label": "Mortality",
                "fields": [
                    {
                        "id": "year",
                        "label": "Year",
                        "description": null,
                        "aggregations": [],
                        "charts": [{"type": "bar"}, {"type": "bubble"}, {"type": "table"}],
                        "update_dimension": true
                    },
                    // Other Dataset fields here ...

                ],
                // Other Dataset attributes here ...
            }
        }
    }
});
&lt;/script&gt;
</code></pre>
                    </li>
                </ul>
            </li>
            <li>
                <strong>Visualisation Elements</strong>
                <ul>
                    <li>
                        <strong>Charts</strong>
                        <ul>
                            <li>
                                <h5>interactive</h5>

                                <p>By default a click on a chart element feature
                                    (bar/point/etc.) makes a new cut to be added to the
                                    dataset. Set this attribute to <em>false</em> in
                                    order to make the chart not reacting on the feature
                                    click event.</p>

                                <p><em>Default value</em>: true</p>

<pre><code class="html prettyprint">&lt;script&gt;
require.config({
    "config": {
        "models/datasetSingleton": {
            "DATASET": {
                // Dataset attributes here (e.g. fields) ...
                "visualisations": [
                    {
                        "id": "1",
                        "label": "Mortality in England and Wales",
                        // Other visualisation attributes here ...
                        "public": true,
                        "elements": [
                            {
                                "id": "year",
                                "label": "Year",
                                "measure_label": "Number of deaths",
                                "type": "bar",
                                "interactive": false,
                                //Other element attributess here ...
                            },
                            // Other elements here ...
                        ],

                    }
                ]
                // Other dataset attributes here ...
            }
        }
    }
});
&lt;/script&gt;
</code></pre>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <strong>Filters</strong>
                        <ul>
                            <li>
                                <h5>required</h5>

                                <p>At the moment this attribute is taken into account
                                    only by the Filter Form element. It is related to an
                                    element's dimension: if it is set to
                                    <strong>true</strong> the
                                    element won't let the user unset the cut on the
                                    dimension the attribute refers to. This also means
                                    that a <a href="#default-cut">default cut</a> needs
                                    to be defined for a required element dimensions.
                                </p>

                                <p><em>Default value</em>: false</p>

<pre><code class="html prettyprint">&lt;script&gt;
require.config({
    "config": {
        "models/datasetSingleton": {
            "DATASET": {
                // Dataset attributes here (e.g. fields) ...
                "visualisations": [
                    {
                        "id": "1",
                        "label": "Mortality in England and Wales",
                        "public": true,
                        // Other visualisation attributes here ...
                        "elements": [
                            {
                                "id": "year",
                                "label": "Year",
                                "measure_label": "Number of deaths",
                                "type": "filterForm",
                                "required": true,
                                //Other element attributes here ...
                            },
                            // Other elements here ...
                        ],

                    }
                ]
                // Other dataset attributes here ...
            }
        }
    }
});
&lt;/script&gt;
</code></pre>
                            </li>
                            <li>
                                <h5>sort</h5>

                                <p>Defines the order in which the filter options have to
                                    be displayed. The value for this attribute is an
                                    object in the
                                    format <em>{"[attribute]": "[direction]"}</em>
                                    where:
                                <ul>
                                    <li>
                                        <em>[attribute]</em> is either "total" or
                                        "label"
                                    </li>
                                    <li>
                                        <em>[direction]</em> is either "asc" or "desc"
                                    </li>
                                </ul>
                                </p>

                                <p><em>Default value</em>: {"total": "desc"}</p>

<pre><code class="html prettyprint">&lt;script&gt;
require.config({
    "config": {
        "models/datasetSingleton": {
            "DATASET": {
                // Dataset attributes here (e.g. fields) ...
                "visualisations": [
                    {
                        "id": "1",
                        "label": "Mortality in England and Wales",
                        "public": true,
                        // Other visualisation attributes here ...
                        "elements": [
                            {
                                "id": "year",
                                "label": "Year",
                                "measure_label": "Number of deaths",
                                "type": "filterForm",
                                "sort": {
                                    "label": "asc"
                                },
                                //Other element attributes here ...
                            },
                            // Other elements here ...
                        ],

                    }
                ]
                // Other dataset attributes here ...
            }
        }
    }
});
&lt;/script&gt;
</code></pre>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>







        <h3 id="api-dimensions">Dimensions</h3>

        <h4>Read</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -H'Accept: application/json' 'https://getdataseed.com/api/datasets/mortality/dimensions/gender'</code>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "gender": {
        "F": {
            "id": "F",
            "label": "Female"
        },
        "M": {
            "id": "M",
            "label": "Male"
        }
    }
}</code></pre>

        <h4>Create</h4>

        <p>Creating (POSTing) dimension values will delete any existing dimension values. To append dimension values use PUT.</p>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XPOST -u'dataseed@example.com:password' -H'Accept: application/json' -H'Content-type: application/json' 'https://getdataseed.com/api/datasets/mortality/dimensions/gender'</code>

        <pre><code class="json prettyprint">{
    "values": [
        {
            "id": "F",
            "label": "Female"
        },
        {
            "id": "M",
            "label": "Male"
        }
    ]
}</code></pre>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Created"
}</code></pre>

        <h4>Update</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XPUT -u'dataseed@example.com:password' -H'Accept: application/json' -H'Content-type: application/json' 'https://getdataseed.com/api/datasets/mortality/dimensions/gender'</code>

        <pre><code class="json prettyprint">{
    "values": [
        {
            "id": "F",
            "label": "Female"
        }
    ]
}</code></pre>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Updated"
}</code></pre>

        <h4>Delete</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XDELETE -u'dataseed@example.com:password' -H'Accept: application/json' 'https://getdataseed.com/api/datasets/mortality/dimensions/gender'</code>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Deleted"
}</code></pre>

        <h3 id="api-observations">Observations</h3>

        <h4>Read</h4>

        <p>When requesting observations they are returned aggregated on a particular measure for a particular dimension. The dimension is specified in the URL and the measure with the following GET parameters:</p>
        <ul>
            <li>measure - The field that contains the measure. This parameter is required unless the aggregation is specified as "rows".</li>
            <li>aggregation - The aggregation type ("sum", "mean", "min", "max" or "rows"). This parameter is always required.</li>
        </ul>

        <p>In the example below we are requesting a "sum" aggregation of the "value" measure for the "gender" dimension.</p>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -H'Accept: application/json' 'https://getdataseed.com/api/datasets/mortality/observations/gender?aggregation=sum&amp;measure=value'</code>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "gender": [
        {
            "id": "F",
            "total": 2645375.0
        },
        {
            "id": "M",
            "total": 2412236.0
        }
    ]
}</code></pre>

        <p>To get <em>"unfaceted" aggregations</em>, that is, aggregations that
            are not related to a dimension's facets, we just have to omit the
            dimension name from the observations Read URL. For example, if we
            want to get a sum of the "value" measure across all the dataset's
            observations and dimensions:</p>
        <h5>Request</h5>

                <code class="shell prettyprint">curl -H'Accept: application/json' 'https://getdataseed.com/api/datasets/mortality/observations/?aggregation=sum&amp;measure=value'</code>

                <h5>Response</h5>

                <pre><code class="json prettyprint">{"total": 5057611.0}</code></pre>

        <h4>Create</h4>

        <p>Creating (POSTing) observations will delete any existing entries. To append observations use PUT.</p>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XPOST -u'dataseed@example.com:password' -H'Accept: application/json' -H'Content-type: application/json' 'https://getdataseed.com/api/datasets/mortality/observations/'</code>

        <pre><code class="json prettyprint">{
    "observations": [
        {
            "gender": "M",
            "year": 2008,
            "chapter": "IX",
            "value": 12
        },
        {
            "gender": "F",
            "year": 2008,
            "chapter": "IX",
            "value": 18
        }
    ]
}</code></pre>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Created"
}</code></pre>

        <h4>Update</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XPUT -u'dataseed@example.com:password' -H'Accept: application/json' -H'Content-type: application/json' 'https://getdataseed.com/api/datasets/mortality/observations'</code>

        <pre><code class="json prettyprint">{
    "observations": [
        {
            "gender": "F",
            "year": 2004,
            "chapter": "V",
            "value": 9
        },
        {
            "gender": "F",
            "year": 2004,
            "chapter": "IV",
            "value": 31
        }
    ]
}</code></pre>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Updated"
}</code></pre>

        <h4>Delete</h4>

        <h5>Request</h5>

        <code class="shell prettyprint">curl -XDELETE -u'dataseed@example.com:password' -H'Accept: application/json' 'https://getdataseed.com/api/datasets/mortality/observations'</code>

        <h5>Response</h5>

        <pre><code class="json prettyprint">{
    "status": 200,
    "message": "Deleted"
}</code></pre>

        <!--
        <h2 id="troubleshooting">Troubleshooting</h2>
        -->

    </div>
</section>